// TODO port all python to typescript